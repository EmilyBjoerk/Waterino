EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:switches
LIBS:relays
LIBS:motors
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:dk_Addressable-Specialty
LIBS:dk_Alarms-Buzzers-and-Sirens
LIBS:dk_Automotive-Relays
LIBS:dk_Balun
LIBS:dk_Barrel-Audio-Connectors
LIBS:dk_Battery-Holders-Clips-Contacts
LIBS:dk_Clock-Timing-Clock-Generators-PLLs-Frequency-Synthesizers
LIBS:dk_Clock-Timing-Programmable-Timers-and-Oscillators
LIBS:dk_Clock-Timing-Real-Time-Clocks
LIBS:dk_Coaxial-Connectors-RF
LIBS:dk_Current-Transducers
LIBS:dk_Data-Acquisition-ADCs-DACs-Special-Purpose
LIBS:dk_Data-Acquisition-Analog-to-Digital-Converters-ADC
LIBS:dk_Data-Acquisition-Digital-Potentiometers
LIBS:dk_Data-Acquisition-Digital-to-Analog-Converters-DAC
LIBS:dk_Data-Acquisition-Touch-Screen-Controllers
LIBS:dk_DC-DC-Converters
LIBS:dk_Digital-Isolators
LIBS:dk_Diodes-Bridge-Rectifiers
LIBS:dk_Diodes-Rectifiers-Arrays
LIBS:dk_Diodes-Rectifiers-Single
LIBS:dk_Diodes-Zener-Single
LIBS:dk_Display-Modules-LCD-OLED-Graphic
LIBS:dk_Display-Modules-LED-Character-and-Numeric
LIBS:dk_D-Sub-Connectors
LIBS:dk_Embedded-Microcontrollers
LIBS:dk_Encoders
LIBS:dk_Evaluation-Boards-Sensors
LIBS:dk_Ferrite-Beads-and-Chips
LIBS:dk_Fixed-Inductors
LIBS:dk_Fuses
LIBS:dk_Gas-Sensors
LIBS:dk_Humidity-Moisture-Sensors
LIBS:dk_Image-Sensors-Camera
LIBS:dk_Infrared-UV-Visible-Emitters
LIBS:dk_Inrush-Current-Limiters-ICL
LIBS:dk_Interface-Analog-Switches-Multiplexers-Demultiplexers
LIBS:dk_Interface-Analog-Switches-Special-Purpose
LIBS:dk_Interface-Controllers
LIBS:dk_Interface-Drivers-Receivers-Transceivers
LIBS:dk_Interface-I-O-Expanders
LIBS:dk_Interface-Modules
LIBS:dk_Interface-Sensor-and-Detector-Interfaces
LIBS:dk_Interface-Sensor-Capacitive-Touch
LIBS:dk_Interface-Specialized
LIBS:dk_LED-Indication-Discrete
LIBS:dk_LEDs-Circuit-Board-Indicators-Arrays-Light-Bars-Bar-Graphs
LIBS:dk_Linear-Amplifiers-Audio
LIBS:dk_Linear-Amplifiers-Instrumentation-OP-Amps-Buffer-Amps
LIBS:dk_Linear-Comparators
LIBS:dk_Logic-Buffers-Drivers-Receivers-Transceivers
LIBS:dk_Logic-Flip-Flops
LIBS:dk_Logic-Gates-and-Inverters
LIBS:dk_Logic-Multivibrators
LIBS:dk_Logic-Shift-Registers
LIBS:dk_Logic-Signal-Switches-Multiplexers-Decoders
LIBS:dk_Logic-Translators-Level-Shifters
LIBS:dk_Magnetic-Sensors-Compass-Magnetic-Field-Modules
LIBS:dk_Magnetic-Sensors-Linear-Compass-ICs
LIBS:dk_Magnetic-Sensors-Switches-Solid-State
LIBS:dk_Memory
LIBS:dk_Memory-Connectors-PC-Card-Sockets
LIBS:dk_Microphones
LIBS:dk_Modular-Connectors-Jacks
LIBS:dk_Modular-Connectors-Jacks-With-Magnetics
LIBS:dk_Motion-Sensors-Accelerometers
LIBS:dk_Motion-Sensors-IMUs-Inertial-Measurement-Units
LIBS:dk_Motion-Sensors-Tilt-Switches
LIBS:dk_Navigation-Switches-Joystick
LIBS:dk_Optical-Sensors-Ambient-Light-IR-UV-Sensors
LIBS:dk_Optical-Sensors-Photo-Detectors-Remote-Receiver
LIBS:dk_Optical-Sensors-Photodiodes
LIBS:dk_Optical-Sensors-Phototransistors
LIBS:dk_Optical-Sensors-Reflective-Analog-Output
LIBS:dk_Optoisolators-Logic-Output
LIBS:dk_Optoisolators-Transistor-Photovoltaic-Output
LIBS:dk_Optoisolators-Triac-SCR-Output
LIBS:dk_Oscillators
LIBS:dk_PMIC-AC-DC-Converters-Offline-Switchers
LIBS:dk_PMIC-Battery-Chargers
LIBS:dk_PMIC-Battery-Management
LIBS:dk_PMIC-Current-Regulation-Management
LIBS:dk_PMIC-Full-Half-Bridge-Drivers
LIBS:dk_PMIC-Gate-Drivers
LIBS:dk_PMIC-LED-Drivers
LIBS:dk_PMIC-Motor-Drivers-Controllers
LIBS:dk_PMIC-OR-Controllers-Ideal-Diodes
LIBS:dk_PMIC-Power-Distribution-Switches-Load-Drivers
LIBS:dk_PMIC-Power-Management-Specialized
LIBS:dk_PMIC-RMS-to-DC-Converters
LIBS:dk_PMIC-Supervisors
LIBS:dk_PMIC-Thermal-Management
LIBS:dk_PMIC-V-F-and-F-V-Converters
LIBS:dk_PMIC-Voltage-Reference
LIBS:dk_PMIC-Voltage-Regulators-DC-DC-Switching-Controllers
LIBS:dk_PMIC-Voltage-Regulators-DC-DC-Switching-Regulators
LIBS:dk_PMIC-Voltage-Regulators-Linear
LIBS:dk_PMIC-Voltage-Regulators-Special-Purpose
LIBS:dk_Power-Relays-Over-2-Amps
LIBS:dk_Pressure-Sensors-Transducers
LIBS:dk_Programmable-Oscillators
LIBS:dk_Pushbutton-Switches
LIBS:dk_Rectangular-Connectors-Headers-Male-Pins
LIBS:dk_Reed-Relays
LIBS:dk_Resistor-Networks-Arrays
LIBS:dk_RF-Amplifiers
LIBS:dk_RF-Antennas
LIBS:dk_RF-Demodulators
LIBS:dk_RF-Detectors
LIBS:dk_RF-Evaluation-and-Development-Kits-Boards
LIBS:dk_RFID-RF-Access-Monitoring-ICs
LIBS:dk_RF-Receivers
LIBS:dk_RF-Switches
LIBS:dk_RF-Transceiver-ICs
LIBS:dk_RF-Transceiver-Modules
LIBS:dk_RF-Transmitters
LIBS:dk_Rotary-Potentiometers-Rheostats
LIBS:dk_Sensors-Transducers_Accessories
LIBS:dk_Signal-Relays-Up-to-2-Amps
LIBS:dk_Slide-Switches
LIBS:dk_Solid-State-Relays
LIBS:dk_Specialized-ICs
LIBS:dk_Specialized-Sensors
LIBS:dk_Surge-Suppression-ICs
LIBS:dk_Tactile-Switches
LIBS:dk_Temperature-Sensors-Analog-and-Digital-Output
LIBS:dk_Thermal-Cutoffs-Thermal-Fuses
LIBS:dk_Thyristors-DIACs-SIDACs
LIBS:dk_Thyristors-SCRs
LIBS:dk_Thyristors-TRIACs
LIBS:dk_Toggle-Switches
LIBS:dk_Transistors-Bipolar-BJT-Arrays
LIBS:dk_Transistors-Bipolar-BJT-RF
LIBS:dk_Transistors-Bipolar-BJT-Single
LIBS:dk_Transistors-Bipolar-BJT-Single-Pre-Biased
LIBS:dk_Transistors-FETs-MOSFETs-Arrays
LIBS:dk_Transistors-FETs-MOSFETs-RF
LIBS:dk_Transistors-FETs-MOSFETs-Single
LIBS:dk_Transistors-JFETs
LIBS:dk_Trimmer-Potentiometers
LIBS:dk_TVS-Diodes
LIBS:dk_TVS-Mixed-Technology
LIBS:dk_USB-DVI-HDMI-Connectors
LIBS:probe_b-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L C C5
U 1 1 5B09AF35
P 8250 1800
F 0 "C5" H 8275 1900 50  0000 L CNN
F 1 "10nF" H 8300 1700 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 8288 1650 50  0001 C CNN
F 3 "" H 8250 1800 50  0001 C CNN
	1    8250 1800
	1    0    0    -1  
$EndComp
$Comp
L C C6
U 1 1 5B09AF36
P 8550 1800
F 0 "C6" H 8575 1900 50  0000 L CNN
F 1 "100nF" H 8600 1700 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 8588 1650 50  0001 C CNN
F 3 "" H 8550 1800 50  0001 C CNN
	1    8550 1800
	1    0    0    -1  
$EndComp
$Comp
L C C7
U 1 1 5B09AF37
P 8850 1800
F 0 "C7" H 8875 1900 50  0000 L CNN
F 1 "1µF" H 8900 1700 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 8888 1650 50  0001 C CNN
F 3 "" H 8850 1800 50  0001 C CNN
	1    8850 1800
	1    0    0    -1  
$EndComp
$Comp
L R NTC1
U 1 1 5B09AF3C
P 5400 4200
F 0 "NTC1" V 5480 4200 50  0000 C CNN
F 1 "R" V 5400 4200 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 5330 4200 50  0001 C CNN
F 3 "" H 5400 4200 50  0001 C CNN
	1    5400 4200
	-1   0    0    -1  
$EndComp
$Comp
L R R17
U 1 1 5B09AF3D
P 5400 3800
F 0 "R17" V 5480 3800 50  0000 C CNN
F 1 "15K" V 5400 3800 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 5330 3800 50  0001 C CNN
F 3 "" H 5400 3800 50  0001 C CNN
	1    5400 3800
	-1   0    0    -1  
$EndComp
$Comp
L BSS84 Q1
U 1 1 5B09AF3E
P 9150 1650
F 0 "Q1" H 9000 1550 50  0000 L CNN
F 1 "SI2323DS" V 9400 1450 50  0000 L CNN
F 2 "emilibeda:SOT-23-Power" H 9350 1575 50  0001 L CIN
F 3 "" H 9150 1650 50  0001 L CNN
	1    9150 1650
	0    1    -1   0   
$EndComp
$Comp
L D_Zener D3
U 1 1 5B09AF3F
P 9450 1800
F 0 "D3" H 9450 1900 50  0000 C CNN
F 1 "BZT52C5V6" H 9450 1700 50  0000 C CNN
F 2 "Diodes_SMD:D_SOD-123" H 9450 1800 50  0001 C CNN
F 3 "" H 9450 1800 50  0001 C CNN
	1    9450 1800
	0    1    1    0   
$EndComp
Text GLabel 10350 1550 2    39   Input ~ 0
Vin
$Comp
L GND #PWR4
U 1 1 5B09AF44
P 9450 2050
F 0 "#PWR4" H 9450 1800 50  0001 C CNN
F 1 "GND" H 9450 1900 50  0000 C CNN
F 2 "" H 9450 2050 50  0001 C CNN
F 3 "" H 9450 2050 50  0001 C CNN
	1    9450 2050
	1    0    0    -1  
$EndComp
Text GLabel 3150 1700 0    39   Input ~ 0
SCL
Text GLabel 3150 1800 0    39   Input ~ 0
SDA
Text GLabel 8850 1550 1    39   Input ~ 0
Vcc
Text GLabel 2450 2550 0    39   Input ~ 0
RST
Text GLabel 2450 2450 0    39   Input ~ 0
SCK
Text GLabel 3650 2450 2    39   Input ~ 0
MOSI
Text GLabel 5000 4000 0    39   Input ~ 0
TEMP+
$Comp
L R R1
U 1 1 5B09AF4A
P 3400 1700
F 0 "R1" V 3350 1850 50  0000 C CNN
F 1 "150R" V 3400 1700 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 3330 1700 50  0001 C CNN
F 3 "" H 3400 1700 50  0001 C CNN
	1    3400 1700
	0    1    1    0   
$EndComp
$Comp
L TEST_1P J6
U 1 1 5B09AF52
P 5400 4000
F 0 "J6" H 5400 4270 50  0000 C CNN
F 1 "TEST_1P" H 5400 4200 50  0000 C CNN
F 2 "Measurement_Points:Measurement_Point_Round-SMD-Pad_Small" H 5600 4000 50  0001 C CNN
F 3 "" H 5600 4000 50  0001 C CNN
	1    5400 4000
	0    1    -1   0   
$EndComp
$Comp
L PWR_FLAG #FLG2
U 1 1 5B09D388
P 8250 1550
F 0 "#FLG2" H 8250 1625 50  0001 C CNN
F 1 "PWR_FLAG" H 8250 1700 50  0000 C CNN
F 2 "" H 8250 1550 50  0001 C CNN
F 3 "" H 8250 1550 50  0001 C CNN
	1    8250 1550
	1    0    0    -1  
$EndComp
$Comp
L PWR_FLAG #FLG4
U 1 1 5B09DF20
P 8550 2050
F 0 "#FLG4" H 8550 2125 50  0001 C CNN
F 1 "PWR_FLAG" H 8550 2200 50  0000 C CNN
F 2 "" H 8550 2050 50  0001 C CNN
F 3 "" H 8550 2050 50  0001 C CNN
	1    8550 2050
	-1   0    0    1   
$EndComp
Text GLabel 2450 2350 0    39   Input ~ 0
MISO
Text GLabel 3200 4950 2    39   Input ~ 0
SCL
Text GLabel 3200 4850 2    39   Input ~ 0
SDA
Text Notes 9650 2150 0    39   ~ 0
This protects the MCU from reverse voltage \nin the case that the connector is reversed. If your \nconnector is keyed (or you're certain you're not \ngoing to mess it up) you can omit this.
$Comp
L PWR_FLAG #FLG3
U 1 1 5B46B68D
P 9450 1550
F 0 "#FLG3" H 9450 1625 50  0001 C CNN
F 1 "PWR_FLAG" H 9450 1700 50  0000 C CNN
F 2 "" H 9450 1550 50  0001 C CNN
F 3 "" H 9450 1550 50  0001 C CNN
	1    9450 1550
	1    0    0    -1  
$EndComp
Text GLabel 6250 7600 2    39   Input ~ 0
RC_REF
Text GLabel 3200 5800 2    39   Input ~ 0
RC_REF
$Comp
L ATMEGA328P-AU U1
U 1 1 5B91B983
P 2200 4700
F 0 "U1" H 1450 5950 50  0000 L BNN
F 1 "ATMEGA328P-AU" H 2600 3300 50  0000 L BNN
F 2 "Housings_QFP:TQFP-32_7x7mm_Pitch0.8mm" H 2200 4700 50  0001 C CIN
F 3 "" H 2200 4700 50  0001 C CNN
	1    2200 4700
	1    0    0    -1  
$EndComp
$Comp
L R R20
U 1 1 5B91E068
P 3800 5900
F 0 "R20" V 3880 5900 50  0000 C CNN
F 1 "1M" V 3800 5900 50  0000 C CNN
F 2 "" V 3730 5900 50  0001 C CNN
F 3 "" H 3800 5900 50  0001 C CNN
	1    3800 5900
	0    1    1    0   
$EndComp
$Comp
L TEST_1P J7
U 1 1 5B91E331
P 3500 6100
F 0 "J7" H 3500 6370 50  0000 C CNN
F 1 "C_soil+" H 3500 6300 50  0000 C CNN
F 2 "" H 3700 6100 50  0001 C CNN
F 3 "" H 3700 6100 50  0001 C CNN
	1    3500 6100
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR6
U 1 1 5B922FFB
P 3550 2550
F 0 "#PWR6" H 3550 2300 50  0001 C CNN
F 1 "GND" H 3550 2400 50  0000 C CNN
F 2 "" H 3550 2550 50  0001 C CNN
F 3 "" H 3550 2550 50  0001 C CNN
	1    3550 2550
	1    0    0    -1  
$EndComp
$Comp
L Conn_02x03_Odd_Even J4
U 1 1 5B9231A7
P 3050 2450
F 0 "J4" H 3100 2650 50  0000 C CNN
F 1 "ICSP" H 3100 2250 50  0000 C CNN
F 2 "" H 3050 2450 50  0001 C CNN
F 3 "" H 3050 2450 50  0001 C CNN
	1    3050 2450
	1    0    0    -1  
$EndComp
Text GLabel 3350 2350 2    39   Input ~ 0
Vin
$Comp
L R R12
U 1 1 5B923B76
P 3500 2450
F 0 "R12" V 3600 2600 50  0000 C CNN
F 1 "150R" V 3500 2450 50  0000 C CNN
F 2 "" V 3430 2450 50  0001 C CNN
F 3 "" H 3500 2450 50  0001 C CNN
	1    3500 2450
	0    1    1    0   
$EndComp
$Comp
L R R8
U 1 1 5B9240D8
P 2700 2350
F 0 "R8" V 2750 2500 50  0000 C CNN
F 1 "150R" V 2700 2350 50  0000 C CNN
F 2 "" V 2630 2350 50  0001 C CNN
F 3 "" H 2700 2350 50  0001 C CNN
	1    2700 2350
	0    -1   -1   0   
$EndComp
$Comp
L R R11
U 1 1 5B925189
P 2700 2450
F 0 "R11" V 2750 2600 50  0000 C CNN
F 1 "150R" V 2700 2450 50  0000 C CNN
F 2 "" V 2630 2450 50  0001 C CNN
F 3 "" H 2700 2450 50  0001 C CNN
	1    2700 2450
	0    -1   -1   0   
$EndComp
$Comp
L R R13
U 1 1 5B925287
P 2700 2550
F 0 "R13" V 2750 2700 50  0000 C CNN
F 1 "150R" V 2700 2550 50  0000 C CNN
F 2 "" V 2630 2550 50  0001 C CNN
F 3 "" H 2700 2550 50  0001 C CNN
	1    2700 2550
	0    -1   -1   0   
$EndComp
Text GLabel 3200 4000 2    39   Input ~ 0
MISO
Text GLabel 3200 4100 2    39   Input ~ 0
SCK
Text GLabel 3200 5050 2    39   Input ~ 0
RST
Text GLabel 3200 3900 2    39   Input ~ 0
MOSI
Text GLabel 1300 3900 0    39   Input ~ 0
AVcc
$Comp
L LED D5
U 1 1 5B9365AD
P 3700 5500
F 0 "D5" H 3700 5600 50  0000 C CNN
F 1 "PUMP_ LED" H 3400 5350 50  0000 C CNN
F 2 "Diodes_SMD:D_0603" H 3700 5500 50  0001 C CNN
F 3 "" H 3700 5500 50  0001 C CNN
	1    3700 5500
	-1   0    0    1   
$EndComp
$Comp
L R R19
U 1 1 5B936B42
P 4000 5500
F 0 "R19" V 3900 5500 50  0000 C CNN
F 1 "1K" V 4000 5500 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 3930 5500 50  0001 C CNN
F 3 "" H 4000 5500 50  0001 C CNN
	1    4000 5500
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR10
U 1 1 5B938DE2
P 4300 5600
F 0 "#PWR10" H 4300 5350 50  0001 C CNN
F 1 "GND" H 4300 5450 50  0000 C CNN
F 2 "" H 4300 5600 50  0001 C CNN
F 3 "" H 4300 5600 50  0001 C CNN
	1    4300 5600
	1    0    0    -1  
$EndComp
$Comp
L Conn_01x04 J3
U 1 1 5B939A22
P 5850 2250
F 0 "J3" H 5850 2450 50  0000 C CNN
F 1 "UART" V 5950 2200 50  0000 C CNN
F 2 "" H 5850 2250 50  0001 C CNN
F 3 "" H 5850 2250 50  0001 C CNN
	1    5850 2250
	1    0    0    -1  
$EndComp
Text GLabel 5650 2150 0    39   Input ~ 0
Vin
$Comp
L GND #PWR5
U 1 1 5B939B7A
P 5650 2450
F 0 "#PWR5" H 5650 2200 50  0001 C CNN
F 1 "GND" H 5650 2300 50  0000 C CNN
F 2 "" H 5650 2450 50  0001 C CNN
F 3 "" H 5650 2450 50  0001 C CNN
	1    5650 2450
	1    0    0    -1  
$EndComp
Text GLabel 3200 5200 2    39   Input ~ 0
RX
Text GLabel 3200 5300 2    39   Input ~ 0
TX
Text GLabel 5350 2250 0    39   Input ~ 0
RX
Text GLabel 5350 2350 0    39   Input ~ 0
TX
$Comp
L R R7
U 1 1 5B93AA39
P 5500 2250
F 0 "R7" V 5600 2300 50  0000 C CNN
F 1 "150R" V 5500 2250 50  0000 C CNN
F 2 "" V 5430 2250 50  0001 C CNN
F 3 "" H 5500 2250 50  0001 C CNN
	1    5500 2250
	0    -1   -1   0   
$EndComp
$Comp
L R R9
U 1 1 5B93AB9E
P 5500 2350
F 0 "R9" V 5400 2400 50  0000 C CNN
F 1 "150R" V 5500 2350 50  0000 C CNN
F 2 "" V 5430 2350 50  0001 C CNN
F 3 "" H 5500 2350 50  0001 C CNN
	1    5500 2350
	0    -1   -1   0   
$EndComp
Text Label 3200 5900 0    39   ~ 0
Csense
Text GLabel 1300 3600 0    39   Input ~ 0
Vcc
$Comp
L C C4
U 1 1 5B9413B0
P 7950 1800
F 0 "C4" H 7975 1900 50  0000 L CNN
F 1 "10nF" H 8000 1700 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 7988 1650 50  0001 C CNN
F 3 "" H 7950 1800 50  0001 C CNN
	1    7950 1800
	1    0    0    -1  
$EndComp
$Comp
L C C3
U 1 1 5B941424
P 7650 1800
F 0 "C3" H 7675 1900 50  0000 L CNN
F 1 "100nF" H 7700 1700 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 7688 1650 50  0001 C CNN
F 3 "" H 7650 1800 50  0001 C CNN
	1    7650 1800
	1    0    0    -1  
$EndComp
$Comp
L C C11
U 1 1 5B9438BD
P 1100 4400
F 0 "C11" H 1125 4500 50  0000 L CNN
F 1 "100nF" H 1125 4300 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 1138 4250 50  0001 C CNN
F 3 "" H 1100 4400 50  0001 C CNN
	1    1100 4400
	1    0    0    -1  
$EndComp
$Comp
L C C10
U 1 1 5B943AA1
P 800 4400
F 0 "C10" H 825 4500 50  0000 L CNN
F 1 "10nF" H 825 4300 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 838 4250 50  0001 C CNN
F 3 "" H 800 4400 50  0001 C CNN
	1    800  4400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR9
U 1 1 5B943D5F
P 1100 4650
F 0 "#PWR9" H 1100 4400 50  0001 C CNN
F 1 "GND" H 1100 4500 50  0000 C CNN
F 2 "" H 1100 4650 50  0001 C CNN
F 3 "" H 1100 4650 50  0001 C CNN
	1    1100 4650
	1    0    0    -1  
$EndComp
Text GLabel 6750 1550 0    39   Input ~ 0
AVcc
$Comp
L L L1
U 1 1 5B945908
P 7400 1550
F 0 "L1" V 7350 1550 50  0000 C CNN
F 1 "10uH" V 7475 1550 50  0000 C CNN
F 2 "" H 7400 1550 50  0001 C CNN
F 3 "https://www.yuden.co.jp/productdata/catalog/wound04_e.pdf" H 7400 1550 50  0001 C CNN
	1    7400 1550
	0    1    -1   0   
$EndComp
$Comp
L C C2
U 1 1 5B945B67
P 7150 1800
F 0 "C2" H 7175 1900 50  0000 L CNN
F 1 "100nF" H 7175 1700 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 7188 1650 50  0001 C CNN
F 3 "" H 7150 1800 50  0001 C CNN
	1    7150 1800
	1    0    0    -1  
$EndComp
Text Notes 6750 650  0    60   ~ 0
Power stage 
$Comp
L Fuse F1
U 1 1 5B947577
P 10100 1550
F 0 "F1" V 10180 1550 50  0000 C CNN
F 1 "0ZCJ0050FF2G" V 10000 1650 50  0000 C CNN
F 2 "" V 10030 1550 50  0001 C CNN
F 3 "https://www.belfuse.com/resources/CircuitProtection/datasheets/0ZCJ%20Nov2016.pdf" H 10100 1550 50  0001 C CNN
	1    10100 1550
	0    1    1    0   
$EndComp
$Comp
L L L2
U 1 1 5B94DD2D
P 9700 1550
F 0 "L2" V 9650 1550 50  0000 C CNN
F 1 "10uH" V 9775 1550 50  0000 C CNN
F 2 "" H 9700 1550 50  0001 C CNN
F 3 "https://www.yuden.co.jp/productdata/catalog/wound04_e.pdf" H 9700 1550 50  0001 C CNN
	1    9700 1550
	0    1    -1   0   
$EndComp
$Comp
L C C1
U 1 1 5B94E0D7
P 6850 1800
F 0 "C1" H 6875 1900 50  0000 L CNN
F 1 "10nF" H 6875 1700 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 6888 1650 50  0001 C CNN
F 3 "" H 6850 1800 50  0001 C CNN
	1    6850 1800
	1    0    0    -1  
$EndComp
Text Notes 6750 1300 0    39   ~ 0
Design goals for power input:\n* External regulation\n* Low power loss at nominal 5V Vin\n* Reverse polarity protection\n* Transient suppression/Overvoltage protection (short events)\n* Nominally 5 V in at max 20 mA (100 mW) sustained\n* Max 6 V to device\n* Min Vin - 0.4 V to device for 5 V Vin 
Text Notes 9400 800  0    39   ~ 0
BZT52C5V6 Zener\nVz nom = 5.6\nVz min = 5.2\nVz max = 6.0
Text Notes 8700 1200 0    39   ~ 0
SI2323DS PMOS\nVds = -20 V\nVgs = +-8 V\nIs = -600 mA\nId = -2.9 A\nVt = -1 V (max)\nVbr,dss = -20 V\n\nBody diode oriented to\nblock reverse polarity.
Text Notes 10050 950  0    39   ~ 0
0ZCJ0050FF2G Fuse\nIhold,trip = 500 mA, 1 A\nVmax = 8 V\nImax = 100 A\nTtT@8 A = 100 ms\nRmin,max = 150 mR, 700 mR\n
Text Notes 10050 1200 0    39   ~ 0
Inductors\nRdc < 150 mR
Text Notes 550  2050 0    39   ~ 0
Total of 300R series resistance at the input at nominal  5V is 25 mA < 40 mA\nmax of ATmega GPIO pins. Prevents repeated peak currents from damaging\nIC when discharging bus capacitance.
$Comp
L R R3
U 1 1 5B99E3C7
P 3400 1800
F 0 "R3" V 3450 1950 50  0000 C CNN
F 1 "150R" V 3400 1800 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 3330 1800 50  0001 C CNN
F 3 "" H 3400 1800 50  0001 C CNN
	1    3400 1800
	0    1    1    0   
$EndComp
Wire Wire Line
	8250 2050 8250 1950
Connection ~ 8250 2050
Wire Wire Line
	8550 2050 8550 1950
Connection ~ 8550 2050
Wire Wire Line
	8850 2050 8850 1950
Connection ~ 8850 2050
Wire Wire Line
	8850 1550 8850 1650
Connection ~ 8850 1550
Wire Wire Line
	8550 1550 8550 1650
Connection ~ 8550 1550
Wire Wire Line
	8250 1550 8250 1650
Connection ~ 8250 1550
Wire Wire Line
	9350 1550 9450 1550
Wire Wire Line
	9450 1550 9550 1550
Wire Wire Line
	5400 4350 5400 4500
Wire Wire Line
	5400 3950 5400 4000
Wire Wire Line
	5400 4000 5400 4050
Connection ~ 5400 4000
Wire Wire Line
	5000 4000 5100 4000
Wire Wire Line
	5100 4000 5400 4000
Wire Wire Line
	9150 2050 9150 1850
Connection ~ 9150 2050
Wire Wire Line
	3200 5900 3500 5900
Wire Wire Line
	3500 5900 3650 5900
Wire Wire Line
	3200 5700 4050 5700
Wire Wire Line
	4050 5700 4050 5900
Wire Wire Line
	4050 5900 3950 5900
Wire Wire Line
	3500 5900 3500 6100
Connection ~ 3500 5900
Wire Wire Line
	3350 2550 3550 2550
Wire Wire Line
	2450 2350 2550 2350
Wire Wire Line
	2450 2450 2550 2450
Wire Wire Line
	2450 2550 2550 2550
Wire Wire Line
	3550 5500 3200 5500
Wire Wire Line
	4150 5500 4300 5500
Wire Wire Line
	4300 5500 4300 5600
Wire Wire Line
	6850 2050 7150 2050
Wire Wire Line
	7150 2050 7650 2050
Wire Wire Line
	7650 2050 7950 2050
Wire Wire Line
	7950 2050 8250 2050
Wire Wire Line
	8250 2050 8550 2050
Wire Wire Line
	8550 2050 8850 2050
Wire Wire Line
	8850 2050 9150 2050
Wire Wire Line
	9150 2050 9450 2050
Wire Wire Line
	1300 3600 1300 3700
Wire Wire Line
	7650 1950 7650 2050
Wire Wire Line
	7950 1950 7950 2050
Connection ~ 7950 2050
Wire Wire Line
	7650 1650 7650 1550
Wire Wire Line
	7950 1550 7950 1650
Connection ~ 7950 1550
Wire Wire Line
	800  4250 800  4200
Wire Wire Line
	800  4200 1100 4200
Wire Wire Line
	1100 4200 1300 4200
Wire Wire Line
	1100 4250 1100 4200
Connection ~ 1100 4200
Wire Wire Line
	1100 4550 1100 4650
Wire Wire Line
	1100 4650 800  4650
Wire Wire Line
	800  4650 800  4550
Wire Wire Line
	6750 1550 6850 1550
Wire Wire Line
	6850 1550 7150 1550
Wire Wire Line
	7150 1550 7250 1550
Wire Wire Line
	7150 1650 7150 1550
Connection ~ 7150 1550
Connection ~ 7650 1550
Wire Wire Line
	7150 1950 7150 2050
Connection ~ 7650 2050
Wire Wire Line
	7550 1550 7650 1550
Wire Wire Line
	7650 1550 7950 1550
Wire Wire Line
	7950 1550 8250 1550
Wire Wire Line
	8250 1550 8550 1550
Wire Wire Line
	8550 1550 8850 1550
Wire Wire Line
	8850 1550 8950 1550
Wire Wire Line
	9450 1550 9450 1650
Wire Wire Line
	9450 2050 9450 1950
Connection ~ 9450 2050
Connection ~ 9450 1550
Wire Wire Line
	6850 1650 6850 1550
Connection ~ 6850 1550
Wire Wire Line
	6850 1950 6850 2050
Connection ~ 7150 2050
Wire Notes Line
	11200 2350 6300 2350
Wire Notes Line
	6300 500  6300 3300
Wire Wire Line
	9950 1550 9850 1550
Wire Wire Line
	10250 1550 10350 1550
Wire Wire Line
	3550 1700 4050 1700
Wire Wire Line
	4050 1700 4250 1700
Wire Wire Line
	4050 1700 4050 1600
Wire Wire Line
	3650 1600 3650 1800
Wire Wire Line
	3550 1800 3650 1800
Wire Wire Line
	3650 1800 4250 1800
Connection ~ 4050 1700
Connection ~ 3650 1800
Wire Wire Line
	3150 1700 3250 1700
Wire Wire Line
	3150 1800 3250 1800
Wire Wire Line
	3750 1100 3750 1000
Wire Wire Line
	3750 1000 4150 1000
Wire Wire Line
	4150 1000 4300 1000
Wire Wire Line
	4150 1000 4150 1100
Wire Wire Line
	3950 1100 3950 900 
Wire Wire Line
	3550 900  3950 900 
Wire Wire Line
	3950 900  4300 900 
Wire Wire Line
	3550 900  3550 1100
$Comp
L GND #PWR1
U 1 1 5B9A25E8
P 4300 1100
F 0 "#PWR1" H 4300 850 50  0001 C CNN
F 1 "GND" H 4300 950 50  0000 C CNN
F 2 "" H 4300 1100 50  0001 C CNN
F 3 "" H 4300 1100 50  0001 C CNN
	1    4300 1100
	1    0    0    -1  
$EndComp
Connection ~ 4150 1000
Wire Wire Line
	4300 1000 4300 1100
Connection ~ 3950 900 
Text GLabel 4300 900  2    39   Input ~ 0
Vin
$Comp
L Conn_01x06 J1
U 1 1 5B9A6DB1
P 5250 1050
F 0 "J1" H 5250 1350 50  0000 C CNN
F 1 "Daisy_OUT" V 5400 1000 50  0000 C CNN
F 2 "" H 5250 1050 50  0001 C CNN
F 3 "" H 5250 1050 50  0001 C CNN
	1    5250 1050
	1    0    0    -1  
$EndComp
$Comp
L Conn_02x02_Odd_Even J2
U 1 1 5B9A6F0F
P 5250 1700
F 0 "J2" H 5300 1800 50  0000 C CNN
F 1 "Daisy_IN" H 5300 1500 50  0000 C CNN
F 2 "" H 5250 1700 50  0001 C CNN
F 3 "" H 5250 1700 50  0001 C CNN
	1    5250 1700
	1    0    0    -1  
$EndComp
Text GLabel 5550 1700 2    39   Input ~ 0
Vin
$Comp
L GND #PWR3
U 1 1 5B9AE958
P 5550 1800
F 0 "#PWR3" H 5550 1550 50  0001 C CNN
F 1 "GND" H 5550 1650 50  0000 C CNN
F 2 "" H 5550 1800 50  0001 C CNN
F 3 "" H 5550 1800 50  0001 C CNN
	1    5550 1800
	1    0    0    -1  
$EndComp
Text GLabel 5050 850  0    39   Input ~ 0
Vin
$Comp
L GND #PWR2
U 1 1 5B9AEA6D
P 5050 1350
F 0 "#PWR2" H 5050 1100 50  0001 C CNN
F 1 "GND" H 5050 1200 50  0000 C CNN
F 2 "" H 5050 1350 50  0001 C CNN
F 3 "" H 5050 1350 50  0001 C CNN
	1    5050 1350
	1    0    0    -1  
$EndComp
Wire Wire Line
	5050 1350 5050 1250
Wire Wire Line
	4550 1700 4850 1700
Wire Wire Line
	4850 1700 5050 1700
Wire Wire Line
	4550 1800 4750 1800
Wire Wire Line
	4750 1800 5050 1800
Wire Wire Line
	4850 1700 4850 1050
Wire Wire Line
	4850 1050 5050 1050
Connection ~ 4850 1700
Wire Wire Line
	5050 950  4750 950 
Wire Wire Line
	4750 950  4750 1800
Connection ~ 4750 1800
Wire Wire Line
	5050 1150 4950 1150
Wire Wire Line
	4950 1150 4950 2150
Wire Wire Line
	4950 2150 4950 2250
$Comp
L R R10
U 1 1 5B9B1CCF
P 4950 2400
F 0 "R10" V 4850 2400 50  0000 C CNN
F 1 "10K" V 4950 2400 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 4880 2400 50  0001 C CNN
F 3 "" H 4950 2400 50  0001 C CNN
	1    4950 2400
	-1   0    0    1   
$EndComp
Text GLabel 4850 2650 0    39   Input ~ 0
Vcc
Wire Wire Line
	4850 2650 4950 2650
Wire Wire Line
	4950 2650 4950 2550
Text Notes 550  1750 0    39   ~ 0
Expecting overflow electrodes to have a resistance of \n30 K ish according to my experiments. Together with the \n10 K pull up results in around 7.5 K output impedence to \nthe max 10 K recommended for the ATmega ADC inputs.
Text GLabel 3950 2150 0    39   Input ~ 0
OVRFLW_SENSE
Wire Wire Line
	4850 2150 4950 2150
Connection ~ 4950 2150
Text Notes 550  600  0    60   ~ 0
Input stage 
$Comp
L C C8
U 1 1 5B9BAFD5
P 4050 2400
F 0 "C8" H 4075 2500 50  0000 L CNN
F 1 "10nF" H 4075 2300 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 4088 2250 50  0001 C CNN
F 3 "" H 4050 2400 50  0001 C CNN
	1    4050 2400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR7
U 1 1 5B9BB262
P 4050 2650
F 0 "#PWR7" H 4050 2400 50  0001 C CNN
F 1 "GND" H 4050 2500 50  0000 C CNN
F 2 "" H 4050 2650 50  0001 C CNN
F 3 "" H 4050 2650 50  0001 C CNN
	1    4050 2650
	1    0    0    -1  
$EndComp
Wire Wire Line
	4050 2650 4050 2550
$Comp
L R R6
U 1 1 5B9BCB5F
P 4700 2150
F 0 "R6" V 4650 2300 50  0000 C CNN
F 1 "150R" V 4700 2150 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 4630 2150 50  0001 C CNN
F 3 "" H 4700 2150 50  0001 C CNN
	1    4700 2150
	0    1    1    0   
$EndComp
Wire Wire Line
	3950 2150 4050 2150
Wire Wire Line
	4050 2150 4150 2150
Wire Wire Line
	4050 2150 4050 2250
Connection ~ 4050 2150
$Comp
L R R5
U 1 1 5B9BD43E
P 4300 2150
F 0 "R5" V 4400 2150 50  0000 C CNN
F 1 "150R" V 4300 2150 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 4230 2150 50  0001 C CNN
F 3 "" H 4300 2150 50  0001 C CNN
	1    4300 2150
	0    1    1    0   
$EndComp
Wire Wire Line
	4450 2150 4500 2150
Wire Wire Line
	4500 2150 4550 2150
$Comp
L R R2
U 1 1 5B9BE50C
P 4400 1700
F 0 "R2" V 4350 1850 50  0000 C CNN
F 1 "150R" V 4400 1700 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 4330 1700 50  0001 C CNN
F 3 "" H 4400 1700 50  0001 C CNN
	1    4400 1700
	0    1    1    0   
$EndComp
$Comp
L R R4
U 1 1 5B9BE5FC
P 4400 1800
F 0 "R4" V 4450 1650 50  0000 C CNN
F 1 "150R" V 4400 1800 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 4330 1800 50  0001 C CNN
F 3 "" H 4400 1800 50  0001 C CNN
	1    4400 1800
	0    1    1    0   
$EndComp
Wire Wire Line
	4500 2150 4500 2250
Connection ~ 4500 2150
$Comp
L GND #PWR8
U 1 1 5B9BFA36
P 4400 2850
F 0 "#PWR8" H 4400 2600 50  0001 C CNN
F 1 "GND" H 4350 2700 50  0000 C CNN
F 2 "" H 4400 2850 50  0001 C CNN
F 3 "" H 4400 2850 50  0001 C CNN
	1    4400 2850
	1    0    0    -1  
$EndComp
Wire Wire Line
	4400 2850 4400 2750
Text GLabel 4700 2850 2    39   Input ~ 0
Vin
Wire Wire Line
	4700 2850 4600 2850
Wire Wire Line
	4600 2850 4600 2750
Text GLabel 3200 4750 2    39   Input ~ 0
OVRFLW_SENSE
Text Notes 550  1400 0    39   ~ 0
ATmega inputs must be within -+0.5 V of ground and Vcc. Pick series resistance\nso that BAT54S current is less than 50 mA (typ value for Vf = 0.5): 150 R.\nBAT54S adds 10 pF bus capacitance.\n
Text Notes 550  1100 0    39   ~ 0
I2C Design\n* Standard Speed (100 KHz, 10 us period)\n* Rise/Fall time = 1 us\n* Given 200R input series resistance pullup must be [2K7, 4K5]\n   assuming max allowed 400 pF bus capacitance\n* Pull up only on pump side, not on probes\n* Total bus capacitance < 400 pFu
$Comp
L BAT54S-7-F D1
U 1 1 5B9DFD9E
P 3650 1300
F 0 "D1" H 3900 1350 60  0000 C BNN
F 1 "BAT54S-7-F" H 3650 1100 60  0000 C CNN
F 2 "digikey-footprints:SOT-23-3" H 3850 1500 60  0001 L CNN
F 3 "https://www.diodes.com/assets/Datasheets/ds11005.pdf" H 3850 1600 60  0001 L CNN
F 4 "BAT54S-FDICT-ND" H 3850 1700 60  0001 L CNN "Digi-Key_PN"
F 5 "BAT54S-7-F" H 3850 1800 60  0001 L CNN "MPN"
F 6 "Discrete Semiconductor Products" H 3850 1900 60  0001 L CNN "Category"
F 7 "Diodes - Rectifiers - Arrays" H 3850 2000 60  0001 L CNN "Family"
F 8 "https://www.diodes.com/assets/Datasheets/ds11005.pdf" H 3850 2100 60  0001 L CNN "DK_Datasheet_Link"
F 9 "/product-detail/en/diodes-incorporated/BAT54S-7-F/BAT54S-FDICT-ND/755493" H 3850 2200 60  0001 L CNN "DK_Detail_Page"
F 10 "DIODE ARRAY SCHOTTKY 30V SOT23-3" H 3850 2300 60  0001 L CNN "Description"
F 11 "Diodes Incorporated" H 3850 2400 60  0001 L CNN "Manufacturer"
F 12 "Active" H 3850 2500 60  0001 L CNN "Status"
	1    3650 1300
	0    1    1    0   
$EndComp
$Comp
L BAT54S-7-F D2
U 1 1 5B9E0005
P 4050 1300
F 0 "D2" H 4300 1350 60  0000 C BNN
F 1 "BAT54S-7-F" H 4050 1100 60  0000 C CNN
F 2 "digikey-footprints:SOT-23-3" H 4250 1500 60  0001 L CNN
F 3 "https://www.diodes.com/assets/Datasheets/ds11005.pdf" H 4250 1600 60  0001 L CNN
F 4 "BAT54S-FDICT-ND" H 4250 1700 60  0001 L CNN "Digi-Key_PN"
F 5 "BAT54S-7-F" H 4250 1800 60  0001 L CNN "MPN"
F 6 "Discrete Semiconductor Products" H 4250 1900 60  0001 L CNN "Category"
F 7 "Diodes - Rectifiers - Arrays" H 4250 2000 60  0001 L CNN "Family"
F 8 "https://www.diodes.com/assets/Datasheets/ds11005.pdf" H 4250 2100 60  0001 L CNN "DK_Datasheet_Link"
F 9 "/product-detail/en/diodes-incorporated/BAT54S-7-F/BAT54S-FDICT-ND/755493" H 4250 2200 60  0001 L CNN "DK_Detail_Page"
F 10 "DIODE ARRAY SCHOTTKY 30V SOT23-3" H 4250 2300 60  0001 L CNN "Description"
F 11 "Diodes Incorporated" H 4250 2400 60  0001 L CNN "Manufacturer"
F 12 "Active" H 4250 2500 60  0001 L CNN "Status"
	1    4050 1300
	0    1    1    0   
$EndComp
$Comp
L BAT54S-7-F D4
U 1 1 5B9E0534
P 4500 2550
F 0 "D4" H 4750 2450 60  0000 C BNN
F 1 "BAT54S-7-F" H 4300 2550 60  0000 C CNN
F 2 "digikey-footprints:SOT-23-3" H 4700 2750 60  0001 L CNN
F 3 "https://www.diodes.com/assets/Datasheets/ds11005.pdf" H 4700 2850 60  0001 L CNN
F 4 "BAT54S-FDICT-ND" H 4700 2950 60  0001 L CNN "Digi-Key_PN"
F 5 "BAT54S-7-F" H 4700 3050 60  0001 L CNN "MPN"
F 6 "Discrete Semiconductor Products" H 4700 3150 60  0001 L CNN "Category"
F 7 "Diodes - Rectifiers - Arrays" H 4700 3250 60  0001 L CNN "Family"
F 8 "https://www.diodes.com/assets/Datasheets/ds11005.pdf" H 4700 3350 60  0001 L CNN "DK_Datasheet_Link"
F 9 "/product-detail/en/diodes-incorporated/BAT54S-7-F/BAT54S-FDICT-ND/755493" H 4700 3450 60  0001 L CNN "DK_Detail_Page"
F 10 "DIODE ARRAY SCHOTTKY 30V SOT23-3" H 4700 3550 60  0001 L CNN "Description"
F 11 "Diodes Incorporated" H 4700 3650 60  0001 L CNN "Manufacturer"
F 12 "Active" H 4700 3750 60  0001 L CNN "Status"
	1    4500 2550
	0    -1   -1   0   
$EndComp
Wire Notes Line
	6300 3300 550  3300
Text GLabel 3200 4650 2    39   Input ~ 0
TEMP+
$Comp
L GND #PWR11
U 1 1 5BA25B56
P 1200 6000
F 0 "#PWR11" H 1200 5750 50  0001 C CNN
F 1 "GND" H 1200 5850 50  0000 C CNN
F 2 "" H 1200 6000 50  0001 C CNN
F 3 "" H 1200 6000 50  0001 C CNN
	1    1200 6000
	1    0    0    -1  
$EndComp
Wire Wire Line
	1200 5700 1200 5800
Wire Wire Line
	1200 5800 1200 5900
Wire Wire Line
	1200 5900 1200 6000
Wire Wire Line
	1200 5900 1300 5900
Wire Wire Line
	1200 5800 1300 5800
Connection ~ 1200 5900
Wire Wire Line
	1300 5700 1200 5700
Connection ~ 1200 5800
NoConn ~ 3200 5400
Wire Wire Line
	3200 4200 3500 4200
Wire Wire Line
	3500 4200 3500 3900
Wire Wire Line
	3500 3900 3850 3900
Wire Wire Line
	3200 3800 3850 3800
Wire Wire Line
	3850 3700 3200 3700
Wire Wire Line
	3200 3600 3850 3600
$Comp
L Conn_01x04 J8
U 1 1 5BA37766
P 4100 7300
F 0 "J8" H 4100 7500 50  0000 C CNN
F 1 "DEBUG_A" V 4200 7250 50  0000 C CNN
F 2 "" H 4100 7300 50  0001 C CNN
F 3 "" H 4100 7300 50  0001 C CNN
	1    4100 7300
	1    0    0    -1  
$EndComp
Text GLabel 3200 4450 2    39   Input ~ 0
DBG_A0
Text GLabel 3400 7200 0    39   Input ~ 0
DBG_A0
Text GLabel 3200 4550 2    39   Input ~ 0
DBG_A1
Text GLabel 3400 7300 0    39   Input ~ 0
DBG_A1
Text GLabel 1300 4950 0    39   Input ~ 0
DBG_A2
Text GLabel 1300 5050 0    39   Input ~ 0
DBG_A3
Text GLabel 3400 7400 0    39   Input ~ 0
DBG_A2
Text GLabel 3400 7500 0    39   Input ~ 0
DBG_A3
$Comp
L R R14
U 1 1 5BA3A294
P 4000 3600
F 0 "R14" V 4050 3800 50  0000 C CNN
F 1 "150R" V 4000 3600 50  0000 C CNN
F 2 "" V 3930 3600 50  0001 C CNN
F 3 "" H 4000 3600 50  0001 C CNN
	1    4000 3600
	0    -1   -1   0   
$EndComp
$Comp
L R R15
U 1 1 5BA3A49F
P 4000 3700
F 0 "R15" V 4050 3900 50  0000 C CNN
F 1 "150R" V 4000 3700 50  0000 C CNN
F 2 "" V 3930 3700 50  0001 C CNN
F 3 "" H 4000 3700 50  0001 C CNN
	1    4000 3700
	0    -1   -1   0   
$EndComp
$Comp
L R R16
U 1 1 5BA3A5A3
P 4000 3800
F 0 "R16" V 4050 4000 50  0000 C CNN
F 1 "150R" V 4000 3800 50  0000 C CNN
F 2 "" V 3930 3800 50  0001 C CNN
F 3 "" H 4000 3800 50  0001 C CNN
	1    4000 3800
	0    -1   -1   0   
$EndComp
$Comp
L R R18
U 1 1 5BA3A677
P 4000 3900
F 0 "R18" V 4050 4100 50  0000 C CNN
F 1 "150R" V 4000 3900 50  0000 C CNN
F 2 "" V 3930 3900 50  0001 C CNN
F 3 "" H 4000 3900 50  0001 C CNN
	1    4000 3900
	0    -1   -1   0   
$EndComp
$Comp
L R R21
U 1 1 5BA3B140
P 3750 7200
F 0 "R21" V 3800 7400 50  0000 C CNN
F 1 "150R" V 3750 7200 50  0000 C CNN
F 2 "" V 3680 7200 50  0001 C CNN
F 3 "" H 3750 7200 50  0001 C CNN
	1    3750 7200
	0    -1   -1   0   
$EndComp
$Comp
L R R26
U 1 1 5BA3B238
P 3750 7300
F 0 "R26" V 3800 7500 50  0000 C CNN
F 1 "150R" V 3750 7300 50  0000 C CNN
F 2 "" V 3680 7300 50  0001 C CNN
F 3 "" H 3750 7300 50  0001 C CNN
	1    3750 7300
	0    -1   -1   0   
$EndComp
$Comp
L R R27
U 1 1 5BA3B31C
P 3750 7400
F 0 "R27" V 3800 7600 50  0000 C CNN
F 1 "150R" V 3750 7400 50  0000 C CNN
F 2 "" V 3680 7400 50  0001 C CNN
F 3 "" H 3750 7400 50  0001 C CNN
	1    3750 7400
	0    -1   -1   0   
$EndComp
$Comp
L R R28
U 1 1 5BA3B43A
P 3750 7500
F 0 "R28" V 3800 7700 50  0000 C CNN
F 1 "150R" V 3750 7500 50  0000 C CNN
F 2 "" V 3680 7500 50  0001 C CNN
F 3 "" H 3750 7500 50  0001 C CNN
	1    3750 7500
	0    -1   -1   0   
$EndComp
Wire Wire Line
	3600 7500 3400 7500
Wire Wire Line
	3400 7400 3600 7400
Wire Wire Line
	3600 7300 3400 7300
Wire Wire Line
	3400 7200 3600 7200
$Comp
L PWR_FLAG #FLG1
U 1 1 5BA42E23
P 6850 1550
F 0 "#FLG1" H 6850 1625 50  0001 C CNN
F 1 "PWR_FLAG" H 6850 1700 50  0000 C CNN
F 2 "" H 6850 1550 50  0001 C CNN
F 3 "" H 6850 1550 50  0001 C CNN
	1    6850 1550
	1    0    0    -1  
$EndComp
Text Notes 4750 6100 0    39   ~ 0
AINn has input leakage of ±50 nA @ Vcc = 5 V and Vin = Vcc/2.\nTo make it negligible we want the current into the pin to be\nlimited to at most 10x at Vcc/2: \nVcc/(2*R) < 500 nA -> R < 1M\n\nLet RC_REF = K*Vcc, then the time until we charge the input to\nRC_REF and the comparator switches is RC seconds where we controll R\nand C is the senssed capacitance. Using a timer at F Hz the precision\nof measured C is dC = min(dT)/(-R*ln(1-K)) = 1 / (-F*R*ln(1-K)) and if the timer has n-bits the range\nof measurable C is 2^n/(F*R*ln(1-K)).\n\nAssume we pick K=0.75, R=1M and have F = 8 MHz (internal RC osc.) then dC = 90 fF.\nIf we pick 24 bits for the counter, we get a range of C from 0 to around 1.5 µF.
$Comp
L R R25
U 1 1 5B9A88B7
P 6450 7250
F 0 "R25" V 6350 7250 50  0000 C CNN
F 1 "100K" V 6450 7250 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 6380 7250 50  0001 C CNN
F 3 "" H 6450 7250 50  0001 C CNN
	1    6450 7250
	0    -1   -1   0   
$EndComp
Wire Wire Line
	6200 7250 6250 7250
Wire Wire Line
	6250 7250 6300 7250
Wire Wire Line
	5900 7250 5850 7250
Wire Wire Line
	5550 7250 5500 7250
Text GLabel 5100 7500 0    39   Input ~ 0
~RC_EXC
Wire Wire Line
	5100 7500 5100 7250
Wire Wire Line
	5100 7250 5200 7250
Text Notes 5100 7100 0    39   ~ 0
Implements K = 0.75\n\nDriving the divider from the gpio pin is a\nbit noisy but it is also a fairly heavy RC filter.\nSo it should be OK.
Text GLabel 6700 7450 3    39   Input ~ 0
AVcc
Wire Wire Line
	6250 7250 6250 7500
Wire Wire Line
	6250 7500 6250 7600
Connection ~ 6250 7250
Text GLabel 3200 4300 2    39   Input ~ 0
~RC_EXC
$Comp
L Conn_01x04 J5
U 1 1 5BA2F405
P 4350 3700
F 0 "J5" H 4350 4000 50  0000 C CNN
F 1 "DEBUG_D" H 4350 3400 50  0000 C CNN
F 2 "" H 4350 3700 50  0001 C CNN
F 3 "" H 4350 3700 50  0001 C CNN
	1    4350 3700
	1    0    0    -1  
$EndComp
$Comp
L R R24
U 1 1 5B9BD76E
P 6050 7250
F 0 "R24" V 5950 7250 50  0000 C CNN
F 1 "100K" V 6050 7250 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 5980 7250 50  0001 C CNN
F 3 "" H 6050 7250 50  0001 C CNN
	1    6050 7250
	0    -1   -1   0   
$EndComp
$Comp
L R R23
U 1 1 5B9BD86A
P 5700 7250
F 0 "R23" V 5600 7250 50  0000 C CNN
F 1 "100K" V 5700 7250 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 5630 7250 50  0001 C CNN
F 3 "" H 5700 7250 50  0001 C CNN
	1    5700 7250
	0    -1   -1   0   
$EndComp
$Comp
L R R22
U 1 1 5B9BD9A0
P 5350 7250
F 0 "R22" V 5250 7250 50  0000 C CNN
F 1 "100K" V 5350 7250 50  0000 C CNN
F 2 "Resistors_SMD:R_0603" V 5280 7250 50  0001 C CNN
F 3 "" H 5350 7250 50  0001 C CNN
	1    5350 7250
	0    -1   -1   0   
$EndComp
Text GLabel 5300 3550 0    39   Input ~ 0
AVcc
Wire Wire Line
	5300 3550 5400 3550
Wire Wire Line
	5400 3550 5400 3650
Wire Wire Line
	6600 7250 6700 7250
Wire Wire Line
	6700 7250 6700 7450
$Comp
L C C12
U 1 1 5B9E158E
P 5900 7500
F 0 "C12" H 5925 7600 50  0000 L CNN
F 1 "100nF" H 5950 7400 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 5938 7350 50  0001 C CNN
F 3 "" H 5900 7500 50  0001 C CNN
	1    5900 7500
	0    1    1    0   
$EndComp
Wire Wire Line
	6250 7500 6050 7500
Connection ~ 6250 7500
Wire Wire Line
	5100 7500 5750 7500
$Comp
L C C9
U 1 1 5B9E27F7
P 5100 4250
F 0 "C9" H 5125 4350 50  0000 L CNN
F 1 "100nF" H 5150 4150 50  0000 L CNN
F 2 "Capacitors_SMD:C_0603" H 5138 4100 50  0001 C CNN
F 3 "" H 5100 4250 50  0001 C CNN
	1    5100 4250
	-1   0    0    1   
$EndComp
Wire Wire Line
	5100 4100 5100 4000
Connection ~ 5100 4000
Wire Wire Line
	5100 4400 5100 4500
Wire Wire Line
	5100 4500 5400 4500
Text GLabel 5400 4500 2    39   Input ~ 0
~TEMP_EXC
Text GLabel 3200 5600 2    39   Input ~ 0
~TEMP_EXC
$EndSCHEMATC
